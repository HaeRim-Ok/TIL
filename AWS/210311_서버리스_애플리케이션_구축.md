기본적인 요청-응답(클라이언트-서버) 메시지 교환 패턴

![image](https://user-images.githubusercontent.com/77096463/110717261-0ea8c900-824c-11eb-8411-c8af58c2d268.png)

<br>

하나의 단계(tier)는 특정 책임을 갖는 복수의 계층(layer)을 갖는다.

![image](https://user-images.githubusercontent.com/77096463/110717298-22542f80-824c-11eb-8ec7-e0e2377c9cb9.png)

<br>

서버리스 아키텍처에는 전통적인 백엔드 시스템이 존재하지 않음

![image](https://user-images.githubusercontent.com/77096463/110717362-3d26a400-824c-11eb-8aae-4eef973b4e45.png)

<br>

**서버리스 아키텍처의 원칙**<br>

1. 컴퓨팅 서비스 > 서버 없이 요구에 맞춰 코드 실행
2. 단일 목적의 <u>상태 없는 함수</u> 작성 -> 즉, 함수의 실행이 끝나면 그걸로 끝 (서비스 연계를 계속 하면 안됨)
3. 푸시 기반, 이벤트 주도 파이프라인 설계 -> 아래 다이어그램 참고
4. 더 두텁고 강한 프론트엔드 만든다 -> 예전에는 무조건 서버에서 FT 진행했다면, 요즘은 클라이언트와 interaction하는 React, Angular, Vue, ... 등이 있음
5. 서드파티 서비스 받아들인다 -> 소셜 로그인

![image](https://user-images.githubusercontent.com/77096463/110717932-5bd96a80-824d-11eb-8633-9ddc0355dd3c.png)

<br>

서버리스 아키텍처 사례: 클라우드 그루 

![image](https://user-images.githubusercontent.com/77096463/110718592-9f80a400-824e-11eb-805b-f88b1765d903.png)

- SPA(Single Page Application) : 서버로부터 전달받은 데이터를 json 형식으로 사용자에게 보여주며 하나의 페이지로 동작하게끔 구성된 애플리케이션

<br>

# 서버리스 애플리케이션 구축 : 24-Hour Video

### 구성도

![image](https://user-images.githubusercontent.com/77096463/110719008-71e82a80-824f-11eb-9a23-f64ca97d6b41.png)

<br>

위 구성도의 우측 Video Upload ~ Video list database까지의 과정을 상세히 살펴보면 아래와 같다. 

![image](https://user-images.githubusercontent.com/77096463/110719171-b4aa0280-824f-11eb-9192-84c67672d8fb.png)

<br>

### 개발 환경 구성

### 1. 시스템 준비

AWS CLI 설치 확인

```
PS C:\Users\Lenovo> aws --version
aws-cli/2.1.27 Python/3.7.9 Windows/10 exe/AMD64 prompt/off
```



Node.js 설치 확인

```
PS C:\Users\Lenovo> node --version
v14.15.4

PS C:\Users\Lenovo> npm --version
6.14.10
```



### 2. IAM 사용자 및 CLI 설정

IAM에 사용자 생성

- 사용자 이름 : lambda_upload
- 액세스 유형 : 프로그래밍 방식 액세스

![image](https://user-images.githubusercontent.com/77096463/110720234-93e2ac80-8251-11eb-9fb5-31af1b243ce8.png)

<br>

사용자를 생성한 후 액세스 키 ID와 비밀 액세스 키는 반드시 다운로드 받기

![image](https://user-images.githubusercontent.com/77096463/110720408-d73d1b00-8251-11eb-96df-f6c11ccd614e.png)

<br>

CLI 환경에서 작업할 수 있도록 액세스 키 ID, 비밀 액세스 키, 리전 정보 설정

```
PS C:\Users\Lenovo> aws configure
AWS Access Key ID [None]: AK*****************
AWS Secret Access Key [None]: mG*****************************
Default region name [None]: us-east-1
Default output format [None]:
```



### 3. 사용자 권한 설정

사용자 권한 설정

- lambda_upload 사용자 > 인라인 정책 설정
- 서비스 : Lambda
- 작업 : 읽기(GetFunction), 쓰기(UpdateFunctionCode, UpdateFunctionConfiguration)
- 리소스 : 모든 리소스

![image](https://user-images.githubusercontent.com/77096463/110720865-ad382880-8252-11eb-9958-b040d9adf65f.png)



lambda-upload-policy 이름을 부여하며 정책 생성을 완료한다.

![image](https://user-images.githubusercontent.com/77096463/110721115-28014380-8253-11eb-955b-e65315837f9a.png)



### 4. 새로운 S3 버킷 생성

### 5. IAM 역할 만들기

### 6. Lambda 준비

### 7. Elastic Transcoder 구성

### 8. npm 설정





