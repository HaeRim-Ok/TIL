# Ansible

**모놀리스 vs 마이크로서비스**<br>
참고 : https://tommypagy.tistory.com/74

<br>

/etc/ansible/hosts 파일 내용 변경

```
[centos]
172.20.10.11
172.20.10.12

[webserver]
172.20.10.11

[backupserver]
172.20.10.12
172.20.10.13

[ubuntu]
172.20.10.13
```

<br>

### 1. 특정 서비스 설치 (중요)

루트 계정으로 진입하여 centos 그룹에 httpd 서비스 설치

```
[root@ansible-server ~]# ansible centos -m yum -a "name=httpd state=present" -k
```

<br>

설치가 잘 되었는지 확인

```
[vagrant@ansible-node01 ~]$ clear
[vagrant@ansible-node01 ~]$ yum list installed | grep httpd
httpd.x86_64                        2.4.6-97.el7.centos         @updates        
httpd-tools.x86_64                  2.4.6-97.el7.centos         @updates     

[vagrant@ansible-node02 ~]$ yum list installed | grep httpd
httpd.x86_64                        2.4.6-97.el7.centos         @updates        
httpd-tools.x86_64                  2.4.6-97.el7.centos         @updates       
```

<br>

httpd 서비스 현재 상태 확인

```
[vagrant@ansible-node01 ~]$ systemctl status httpd
● httpd.service - The Apache HTTP Server
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)
   Active: inactive (dead)
     Docs: man:httpd(8)
           man:apachectl(8)

[vagrant@ansible-node02 ~]$ systemctl status httpd
● httpd.service - The Apache HTTP Server
   Loaded: loaded (/usr/lib/systemd/system/httpd.service; disabled; vendor preset: disabled)
   Active: inactive (dead)
     Docs: man:httpd(8)
           man:apachectl(8)
```

