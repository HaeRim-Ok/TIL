**Kafka & rabbitMQ 찾아보기**

# Kafka Connect

> Source System: 원본 <br>
> Kafka Connect Source: 원본에서 데이터 가져올 때  <br>
> Kafka Cluster: 토픽에 메세지 데이터 쌓여 있음  <br>
> Kafka Connect Sink : 토픽에서 타겟에 데이터 전달할 때 <br>
> Target System : 타겟 (복제본)

![image](https://user-images.githubusercontent.com/77096463/113370032-cc336180-939d-11eb-85f8-8e273f99fe31.png)

<br>

- 주로 Kakfa Client로 Kafka Cluster에 데이터를 저장하지만, Kafka Connect를 통해서도 데이터를 Import/Export 가능하다.

- 코드 없이 Configuration으로 데이터를 이동시키는 것이 목적
  - Standalone mode, Distribution mode 지원
  - **RESTful API 통해 지원**
  - Stream 혹은 Batch 형태로 데이터 전송 가능
  - 커스텀 Connector를 통한 다양한 Plugin 제공 (S3, File, Hive, Mysql, etc..) 

<br>

### 1. MariaDB 설정

https://mvnrepository.com/artifact/org.mariadb.jdbc/mariadb-java-client/2.7.2 사이트에서 MariaDB Java Client 2.7.2 버전 다운받기

![image](https://user-images.githubusercontent.com/77096463/113371415-3d284880-93a1-11eb-8f96-6e3cad3ea86a.png)

<br>

HeidiSQL로 localhost에 접속한 뒤 mydb 데이터베이스에 users 테이블 생성

```sql
create database mydb;

use mydb;
create table users(
	id int auto_increment primary key,
	user_id varchar(20) not null,
	pwd varchar(20) not null,
	created_at datetime default now()
);
```

생성된 테이블 확인

![image](https://user-images.githubusercontent.com/77096463/113372056-be340f80-93a2-11eb-8063-6413135fbf9f.png)

<br>

:rotating_light:**​ Troubleshooting - Authentication plugin 'caching_sha2_password' cannot be loaded**

- [your_password] 항목에 설정하고 싶은 패스워드를 입력하여 재설정한다.

```
C:\Users\Lenovo>cd "C:\Program Files\MySQL\MySQL Server 8.0\bin"

C:\Program Files\MySQL\MySQL Server 8.0\bin>mysql -u root -p
Enter password: *****

mysql> ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '[your_password]';
Query OK, 0 rows affected (0.07 sec)

mysql> exit
Bye
```

<br>

### 2. Kafka Connect 설치

Kafka Connect 설치

```
C:\cloud>mkdir kafka_connect
C:\cloud>cd kafka_connect

C:\cloud\kafka_connect>curl -O http://packages.confluent.io/archive/6.1/confluent-community-6.1.0.tar.gz
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  326M  100  326M    0     0  11.2M      0  0:00:29  0:00:29 --:--:-- 9148k
```

<br>

Kafka Connect 압축 해제

```
C:\cloud\kafka_connect>tar xvf confluent-community-6.1.0.tar.gz
```

<br>